#/usr/bin/env sh

if [ "$#" -eq "0" ]
then
    printf 'preview: missing argument\n' >&2
    exit 1
fi

ft="$(file -bL --mime-type "$1")"

if case "$ft" in "text/"*) true;; *) false;; esac
then
    bat --style=plain --line-range=:200 "$1"
elif [ "$ft" = "inode/directory" ]
then
    tree -C "$1" | head -n 200
else
    file -bL "$1"
fi
